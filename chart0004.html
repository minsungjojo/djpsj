<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApexCharts로 일별 트랜잭션 수 차트 만들기</title>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
        /* 차트를 화면에 꽉 채우기 위한 스타일 */
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000000;
            color: #FFFFFF;
            height: 100%;
        }
        #chart {
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>

    <!-- 차트를 표시할 div -->
    <div id="chart"></div>

    <script>
        // b1.json 파일의 데이터를 가져와 ApexCharts로 차트 생성
        async function createChart() {
            try {
                // JSON 파일 로드
                const response = await fetch('b4.json');
                const data = await response.json();

                // day와 transaction_count 데이터 추출
                const categories = data.map(item => new Date(item.day).toLocaleDateString('ko-KR'));
                const transactionCounts = data.map(item => item.transaction_count);

                // ApexCharts 옵션 설정
                const options = {
                    chart: {
                        type: 'line', // 라인 차트 설정
                        height: '100%',
                        width: '100%',
                        background: '#000000', // 배경 색상 검은색으로 설정
                    },
                    series: [{
                        name: '트랜잭션 수',
                        data: transactionCounts
                    }],
                    xaxis: {
                        categories: categories, // x축에 날짜 표시
                        title: {
                            text: '날짜',
                            style: {
                                color: '#FFFFFF' // x축 제목 글자 색 흰색
                            }
                        },
                        labels: {
                            style: {
                                colors: '#FFFFFF' // x축 레이블 색상 흰색
                            }
                        }
                    },
                    yaxis: {
                        title: {
                            text: '트랜잭션 수',
                            style: {
                                color: '#FFFFFF' // y축 제목 글자 색 흰색
                            }
                        },
                        labels: {
                            style: {
                                colors: '#FFFFFF' // y축 레이블 색상 흰색
                            }
                        }
                    },
                    stroke: {
                        curve: 'smooth', // 곡선형 라인
                        colors: ['#00E396'] // 라인 색상 설정
                    },
                    markers: {
                        size: 4, // 데이터 포인트 마커 크기
                        colors: ['#FF4560'], // 마커 색상 설정
                        strokeColors: '#FFFFFF', // 마커 테두리 색 흰색
                        strokeWidth: 2 // 테두리 두께
                    },
                    colors: ['#00E396'], // 라인 색상 설정
                    grid: {
                        borderColor: '#333333' // 그리드 색상 짙은 회색으로 설정
                    },
                    tooltip: {
                        theme: 'dark' // 툴팁을 어두운 테마로 설정
                    }
                };

                // ApexCharts 차트 생성
                const chart = new ApexCharts(document.querySelector("#chart"), options);
                chart.render();
            } catch (error) {
                console.error('Error loading the JSON data:', error);
            }
        }

        // 페이지 로드 시 차트 생성 함수 호출
        window.onload = createChart;
    </script>
</body>
</html>
